import React from 'react';
import {shallow, configure, mount} from 'enzyme';
import {Provider} from 'react-redux';
import configureStore from 'redux-mock-store'
import Adapter from 'enzyme-adapter-react-16';


import DayContainer from '../../ui/js/components/DayContainer'

configure({adapter: new Adapter()});


// create any initial state needed
let testData = '{"app":{"refreshedOn":1547645581611},"data":{"observations":{"1547650800":{"temp":289.12,"temp_min":289.12,"temp_max":291.699,"pressure":930.1,"sea_level":1027.23,"grnd_level":930.1,"humidity":53,"temp_kf":-2.58,"weather":"Clear","wind":{"speed":3.66,"deg":93}},"1547661600":{"temp":286.39,"temp_min":286.39,"temp_max":288.323,"pressure":930.32,"sea_level":1028.2,"grnd_level":930.32,"humidity":79,"temp_kf":-1.94,"weather":"Clear","wind":{"speed":3.56,"deg":99.0022}},"1547672400":{"temp":285.05,"temp_min":285.05,"temp_max":286.339,"pressure":929.12,"sea_level":1027.46,"grnd_level":929.12,"humidity":95,"temp_kf":-1.29,"weather":"Clear","wind":{"speed":3.68,"deg":91.5006}},"1547683200":{"temp":284.49,"temp_min":284.49,"temp_max":285.132,"pressure":929.48,"sea_level":1028.06,"grnd_level":929.48,"humidity":95,"temp_kf":-0.65,"weather":"Clear","wind":{"speed":2.97,"deg":86.5004}},"1547694000":{"temp":289.094,"temp_min":289.094,"temp_max":289.094,"pressure":930.98,"sea_level":1029.54,"grnd_level":930.98,"humidity":88,"temp_kf":0,"weather":"Clear","wind":{"speed":2.52,"deg":107.008}},"1547704800":{"temp":298.628,"temp_min":298.628,"temp_max":298.628,"pressure":930.54,"sea_level":1027.41,"grnd_level":930.54,"humidity":52,"temp_kf":0,"weather":"Clear","wind":{"speed":3.71,"deg":88.5006}},"1547715600":{"temp":301.436,"temp_min":301.436,"temp_max":301.436,"pressure":928.19,"sea_level":1024.24,"grnd_level":928.19,"humidity":39,"temp_kf":0,"weather":"Clear","wind":{"speed":4.18,"deg":56.5033}},"1547726400":{"temp":299.915,"temp_min":299.915,"temp_max":299.915,"pressure":927.85,"sea_level":1024.03,"grnd_level":927.85,"humidity":33,"temp_kf":0,"weather":"Clear","wind":{"speed":3.36,"deg":55.5089}},"1547737200":{"temp":292.02,"temp_min":292.02,"temp_max":292.02,"pressure":929.52,"sea_level":1026.53,"grnd_level":929.52,"humidity":57,"temp_kf":0,"weather":"Clear","wind":{"speed":3.28,"deg":70.5052}},"1547748000":{"temp":288.255,"temp_min":288.255,"temp_max":288.255,"pressure":930.09,"sea_level":1027.87,"grnd_level":930.09,"humidity":93,"temp_kf":0,"weather":"Clear","wind":{"speed":3.22,"deg":111.004}},"1547758800":{"temp":286.1,"temp_min":286.1,"temp_max":286.1,"pressure":929.44,"sea_level":1027.54,"grnd_level":929.44,"humidity":99,"temp_kf":0,"weather":"Clear","wind":{"speed":2.32,"deg":106.001}},"1547769600":{"temp":283.886,"temp_min":283.886,"temp_max":283.886,"pressure":929.65,"sea_level":1028.28,"grnd_level":929.65,"humidity":96,"temp_kf":0,"weather":"Clear","wind":{"speed":1.38,"deg":97.0003}},"1547780400":{"temp":289.256,"temp_min":289.256,"temp_max":289.256,"pressure":931.57,"sea_level":1030.08,"grnd_level":931.57,"humidity":95,"temp_kf":0,"weather":"Clear","wind":{"speed":3.46,"deg":100.5}},"1547791200":{"temp":298.472,"temp_min":298.472,"temp_max":298.472,"pressure":931.49,"sea_level":1028.36,"grnd_level":931.49,"humidity":52,"temp_kf":0,"weather":"Rain","wind":{"speed":3.78,"deg":72.5025}},"1547802000":{"temp":300.904,"temp_min":300.904,"temp_max":300.904,"pressure":928.85,"sea_level":1024.94,"grnd_level":928.85,"humidity":37,"temp_kf":0,"weather":"Clear","wind":{"speed":4.81,"deg":56.0026}},"1547812800":{"temp":299.431,"temp_min":299.431,"temp_max":299.431,"pressure":928.64,"sea_level":1024.87,"grnd_level":928.64,"humidity":33,"temp_kf":0,"weather":"Clear","wind":{"speed":4.01,"deg":60.0099}},"1547823600":{"temp":292.212,"temp_min":292.212,"temp_max":292.212,"pressure":930.49,"sea_level":1027.56,"grnd_level":930.49,"humidity":55,"temp_kf":0,"weather":"Clear","wind":{"speed":3.57,"deg":74.0013}},"1547834400":{"temp":288.447,"temp_min":288.447,"temp_max":288.447,"pressure":930.88,"sea_level":1028.72,"grnd_level":930.88,"humidity":87,"temp_kf":0,"weather":"Clear","wind":{"speed":3.68,"deg":101.002}},"1547845200":{"temp":286.969,"temp_min":286.969,"temp_max":286.969,"pressure":929.94,"sea_level":1028.24,"grnd_level":929.94,"humidity":95,"temp_kf":0,"weather":"Clear","wind":{"speed":3.46,"deg":104.502}},"1547856000":{"temp":284.616,"temp_min":284.616,"temp_max":284.616,"pressure":929.8,"sea_level":1028.52,"grnd_level":929.8,"humidity":95,"temp_kf":0,"weather":"Clear","wind":{"speed":2.31,"deg":90.5031}},"1547866800":{"temp":289.364,"temp_min":289.364,"temp_max":289.364,"pressure":931.66,"sea_level":1030.11,"grnd_level":931.66,"humidity":84,"temp_kf":0,"weather":"Clear","wind":{"speed":1.86,"deg":92.5016}},"1547877600":{"temp":298.402,"temp_min":298.402,"temp_max":298.402,"pressure":931.38,"sea_level":1028.23,"grnd_level":931.38,"humidity":42,"temp_kf":0,"weather":"Clear","wind":{"speed":4.21,"deg":76.5002}},"1547888400":{"temp":301.008,"temp_min":301.008,"temp_max":301.008,"pressure":928.86,"sea_level":1025.11,"grnd_level":928.86,"humidity":31,"temp_kf":0,"weather":"Clear","wind":{"speed":4.77,"deg":75.5051}},"1547899200":{"temp":299.361,"temp_min":299.361,"temp_max":299.361,"pressure":928.61,"sea_level":1024.82,"grnd_level":928.61,"humidity":31,"temp_kf":0,"weather":"Clear","wind":{"speed":4.01,"deg":81.0001}},"1547910000":{"temp":292.403,"temp_min":292.403,"temp_max":292.403,"pressure":930.66,"sea_level":1027.81,"grnd_level":930.66,"humidity":56,"temp_kf":0,"weather":"Clear","wind":{"speed":4.11,"deg":100.503}},"1547920800":{"temp":289.294,"temp_min":289.294,"temp_max":289.294,"pressure":931.23,"sea_level":1029.17,"grnd_level":931.23,"humidity":80,"temp_kf":0,"weather":"Clear","wind":{"speed":4.22,"deg":107.001}},"1547931600":{"temp":286.894,"temp_min":286.894,"temp_max":286.894,"pressure":930.31,"sea_level":1028.72,"grnd_level":930.31,"humidity":95,"temp_kf":0,"weather":"Clear","wind":{"speed":3.76,"deg":107.503}},"1547942400":{"temp":285.652,"temp_min":285.652,"temp_max":285.652,"pressure":930.22,"sea_level":1029.06,"grnd_level":930.22,"humidity":96,"temp_kf":0,"weather":"Clear","wind":{"speed":3.47,"deg":107.002}},"1547953200":{"temp":288.966,"temp_min":288.966,"temp_max":288.966,"pressure":931.99,"sea_level":1030.67,"grnd_level":931.99,"humidity":89,"temp_kf":0,"weather":"Clear","wind":{"speed":3.83,"deg":97.5015}},"1547964000":{"temp":298.186,"temp_min":298.186,"temp_max":298.186,"pressure":931.55,"sea_level":1028.51,"grnd_level":931.55,"humidity":46,"temp_kf":0,"weather":"Clear","wind":{"speed":4.46,"deg":83.5018}},"1547974800":{"temp":300.877,"temp_min":300.877,"temp_max":300.877,"pressure":928.68,"sea_level":1024.99,"grnd_level":928.68,"humidity":34,"temp_kf":0,"weather":"Clear","wind":{"speed":4.01,"deg":86.5104}},"1547985600":{"temp":299.403,"temp_min":299.403,"temp_max":299.403,"pressure":928.05,"sea_level":1024.33,"grnd_level":928.05,"humidity":32,"temp_kf":0,"weather":"Clear","wind":{"speed":3.62,"deg":95.5031}},"1547996400":{"temp":292.69,"temp_min":292.69,"temp_max":292.69,"pressure":930.1,"sea_level":1027.34,"grnd_level":930.1,"humidity":53,"temp_kf":0,"weather":"Clear","wind":{"speed":4.46,"deg":118.507}},"1548007200":{"temp":289.511,"temp_min":289.511,"temp_max":289.511,"pressure":931.17,"sea_level":1029.17,"grnd_level":931.17,"humidity":78,"temp_kf":0,"weather":"Clear","wind":{"speed":4.02,"deg":117}},"1548018000":{"temp":287.169,"temp_min":287.169,"temp_max":287.169,"pressure":929.72,"sea_level":1028.15,"grnd_level":929.72,"humidity":92,"temp_kf":0,"weather":"Clear","wind":{"speed":3.81,"deg":104.5}},"1548028800":{"temp":285.218,"temp_min":285.218,"temp_max":285.218,"pressure":929.49,"sea_level":1028.39,"grnd_level":929.49,"humidity":95,"temp_kf":0,"weather":"Clear","wind":{"speed":3.01,"deg":100.002}},"1548039600":{"temp":288.898,"temp_min":288.898,"temp_max":288.898,"pressure":931.46,"sea_level":1030.15,"grnd_level":931.46,"humidity":85,"temp_kf":0,"weather":"Clear","wind":{"speed":2.75,"deg":104.002}},"1548050400":{"temp":298.299,"temp_min":298.299,"temp_max":298.299,"pressure":930.88,"sea_level":1027.7,"grnd_level":930.88,"humidity":45,"temp_kf":0,"weather":"Clear","wind":{"speed":3.01,"deg":73.5058}},"1548061200":{"temp":300.905,"temp_min":300.905,"temp_max":300.905,"pressure":927.74,"sea_level":1023.96,"grnd_level":927.74,"humidity":31,"temp_kf":0,"weather":"Clear","wind":{"speed":2.52,"deg":76.0007}},"1548072000":{"temp":299.591,"temp_min":299.591,"temp_max":299.591,"pressure":927.23,"sea_level":1023.4,"grnd_level":927.23,"humidity":27,"temp_kf":0,"weather":"Clear","wind":{"speed":1.86,"deg":93.5005}}}}}'
const initialState = JSON.parse(testData);
// here it is possible to pass in any middleware if needed into //configureStore
const mockStore = configureStore();


test('render day container', () => {
    let store = mockStore(initialState)
    let wrapper = shallow(<Provider store={store}><DayContainer/></Provider>)
    let expectedHtml = "<h2>Showing weather for next 5 days for Bengaluru City</h2><div>Last updated on 1/16/2019, 7:03:01 PM<div><button>Refresh</button></div></div><div class=\"day-cards\"><div class=\"flip-card\"><div class=\"flip-card-inner\"><div class=\"flip-card-front\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><div><h4>Day : Wed Jan 16 2019</h4><div>Max Temp : 15.97 C at <span>20:30</span></div><div>Min Temp : 11.90 C at <span>2:30</span></div><div>Max Humidity : 95% at <span>2:30</span></div><div>Min Humidity : 53% at <span>20:30</span></div></div></div><div class=\"flip-card-back\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><h4>Hourly Forecast</h4><div class=\"hourly-table\"><table><thead><tr><th>Time</th><th>Temprature</th><th>Humidity</th><th>Weather</th></tr></thead><tbody><tr><td><span>20:30</span></td><td>15.97 C</td><td>53%</td><td>Clear</td></tr><tr><td><span>23:30</span></td><td>13.24 C</td><td>79%</td><td>Clear</td></tr><tr><td><span>2:30</span></td><td>11.90 C</td><td>95%</td><td>Clear</td></tr></tbody></table></div></div></div></div><div class=\"flip-card\"><div class=\"flip-card-inner\"><div class=\"flip-card-front\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><div><h4>Day : Thu Jan 17 2019</h4><div>Max Temp : 28.29 C at <span>14:30</span></div><div>Min Temp : 11.34 C at <span>5:30</span></div><div>Max Humidity : 99% at <span>2:30</span></div><div>Min Humidity : 33% at <span>17:30</span></div></div></div><div class=\"flip-card-back\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><h4>Hourly Forecast</h4><div class=\"hourly-table\"><table><thead><tr><th>Time</th><th>Temprature</th><th>Humidity</th><th>Weather</th></tr></thead><tbody><tr><td><span>5:30</span></td><td>11.34 C</td><td>95%</td><td>Clear</td></tr><tr><td><span>8:30</span></td><td>15.94 C</td><td>88%</td><td>Clear</td></tr><tr><td><span>11:30</span></td><td>25.48 C</td><td>52%</td><td>Clear</td></tr><tr><td><span>14:30</span></td><td>28.29 C</td><td>39%</td><td>Clear</td></tr><tr><td><span>17:30</span></td><td>26.77 C</td><td>33%</td><td>Clear</td></tr><tr><td><span>20:30</span></td><td>18.87 C</td><td>57%</td><td>Clear</td></tr><tr><td><span>23:30</span></td><td>15.11 C</td><td>93%</td><td>Clear</td></tr><tr><td><span>2:30</span></td><td>12.95 C</td><td>99%</td><td>Clear</td></tr></tbody></table></div></div></div></div><div class=\"flip-card\"><div class=\"flip-card-inner\"><div class=\"flip-card-front\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><div><h4>Day : Fri Jan 18 2019</h4><div>Max Temp : 27.75 C at <span>14:30</span></div><div>Min Temp : 10.74 C at <span>5:30</span></div><div>Max Humidity : 96% at <span>5:30</span></div><div>Min Humidity : 33% at <span>17:30</span></div></div></div><div class=\"flip-card-back\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><h4>Hourly Forecast</h4><div class=\"hourly-table\"><table><thead><tr><th>Time</th><th>Temprature</th><th>Humidity</th><th>Weather</th></tr></thead><tbody><tr><td><span>5:30</span></td><td>10.74 C</td><td>96%</td><td>Clear</td></tr><tr><td><span>8:30</span></td><td>16.11 C</td><td>95%</td><td>Clear</td></tr><tr><td><span>11:30</span></td><td>25.32 C</td><td>52%</td><td>Rain</td></tr><tr><td><span>14:30</span></td><td>27.75 C</td><td>37%</td><td>Clear</td></tr><tr><td><span>17:30</span></td><td>26.28 C</td><td>33%</td><td>Clear</td></tr><tr><td><span>20:30</span></td><td>19.06 C</td><td>55%</td><td>Clear</td></tr><tr><td><span>23:30</span></td><td>15.30 C</td><td>87%</td><td>Clear</td></tr><tr><td><span>2:30</span></td><td>13.82 C</td><td>95%</td><td>Clear</td></tr></tbody></table></div></div></div></div><div class=\"flip-card\"><div class=\"flip-card-inner\"><div class=\"flip-card-front\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><div><h4>Day : Sat Jan 19 2019</h4><div>Max Temp : 27.86 C at <span>14:30</span></div><div>Min Temp : 11.47 C at <span>5:30</span></div><div>Max Humidity : 95% at <span>5:30</span></div><div>Min Humidity : 31% at <span>14:30</span></div></div></div><div class=\"flip-card-back\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><h4>Hourly Forecast</h4><div class=\"hourly-table\"><table><thead><tr><th>Time</th><th>Temprature</th><th>Humidity</th><th>Weather</th></tr></thead><tbody><tr><td><span>5:30</span></td><td>11.47 C</td><td>95%</td><td>Clear</td></tr><tr><td><span>8:30</span></td><td>16.21 C</td><td>84%</td><td>Clear</td></tr><tr><td><span>11:30</span></td><td>25.25 C</td><td>42%</td><td>Clear</td></tr><tr><td><span>14:30</span></td><td>27.86 C</td><td>31%</td><td>Clear</td></tr><tr><td><span>17:30</span></td><td>26.21 C</td><td>31%</td><td>Clear</td></tr><tr><td><span>20:30</span></td><td>19.25 C</td><td>56%</td><td>Clear</td></tr><tr><td><span>23:30</span></td><td>16.14 C</td><td>80%</td><td>Clear</td></tr><tr><td><span>2:30</span></td><td>13.74 C</td><td>95%</td><td>Clear</td></tr></tbody></table></div></div></div></div><div class=\"flip-card\"><div class=\"flip-card-inner\"><div class=\"flip-card-front\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><div><h4>Day : Sun Jan 20 2019</h4><div>Max Temp : 27.73 C at <span>14:30</span></div><div>Min Temp : 12.50 C at <span>5:30</span></div><div>Max Humidity : 96% at <span>5:30</span></div><div>Min Humidity : 32% at <span>17:30</span></div></div></div><div class=\"flip-card-back\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><h4>Hourly Forecast</h4><div class=\"hourly-table\"><table><thead><tr><th>Time</th><th>Temprature</th><th>Humidity</th><th>Weather</th></tr></thead><tbody><tr><td><span>5:30</span></td><td>12.50 C</td><td>96%</td><td>Clear</td></tr><tr><td><span>8:30</span></td><td>15.82 C</td><td>89%</td><td>Clear</td></tr><tr><td><span>11:30</span></td><td>25.04 C</td><td>46%</td><td>Clear</td></tr><tr><td><span>14:30</span></td><td>27.73 C</td><td>34%</td><td>Clear</td></tr><tr><td><span>17:30</span></td><td>26.25 C</td><td>32%</td><td>Clear</td></tr><tr><td><span>20:30</span></td><td>19.54 C</td><td>53%</td><td>Clear</td></tr><tr><td><span>23:30</span></td><td>16.36 C</td><td>78%</td><td>Clear</td></tr><tr><td><span>2:30</span></td><td>14.02 C</td><td>92%</td><td>Clear</td></tr></tbody></table></div></div></div></div><div class=\"flip-card\"><div class=\"flip-card-inner\"><div class=\"flip-card-front\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><div><h4>Day : Mon Jan 21 2019</h4><div>Max Temp : 27.75 C at <span>14:30</span></div><div>Min Temp : 12.07 C at <span>5:30</span></div><div>Max Humidity : 95% at <span>5:30</span></div><div>Min Humidity : 27% at <span>17:30</span></div></div></div><div class=\"flip-card-back\"><img class=\"flip-icon\" src=\"./img/flip.png\"/><h4>Hourly Forecast</h4><div class=\"hourly-table\"><table><thead><tr><th>Time</th><th>Temprature</th><th>Humidity</th><th>Weather</th></tr></thead><tbody><tr><td><span>5:30</span></td><td>12.07 C</td><td>95%</td><td>Clear</td></tr><tr><td><span>8:30</span></td><td>15.75 C</td><td>85%</td><td>Clear</td></tr><tr><td><span>11:30</span></td><td>25.15 C</td><td>45%</td><td>Clear</td></tr><tr><td><span>14:30</span></td><td>27.75 C</td><td>31%</td><td>Clear</td></tr><tr><td><span>17:30</span></td><td>26.44 C</td><td>27%</td><td>Clear</td></tr></tbody></table></div></div></div></div></div>";
    expect( wrapper.html()).toEqual(expectedHtml)
});

